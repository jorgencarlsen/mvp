# Migration `20201101223844-update-schema-to-use-enums-for-certain-fields`

This migration has been generated by Jorgen Carlsen at 11/1/2020, 2:38:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."DataStructureType" AS ENUM ('LINKED_LIST', 'STACK', 'QUEUE', 'HASH_TABLE', 'ARRAY', 'STRING', 'GRAPH', 'TREE', 'BINARY_TREE', 'BINARY_SEARCH_TREE', 'HEAP', 'TRIE')

CREATE TYPE "public"."Difficulty" AS ENUM ('VERY_EASY', 'EASY', 'MEDIUM', 'HARD', 'VERY_HARD', 'EXTREMELY_HARD')

CREATE TYPE "public"."Algorithm" AS ENUM ('DYNAMIC_PROGRAMMING', 'POINTERS', 'RECURSION', 'PATH_FINDING', 'GRAPH_TRAVERSAL', 'SORTING', 'SEARCHING')

CREATE TABLE "public"."Post" (
"id" SERIAL,
"title" text   NOT NULL ,
"content" text   ,
"published" boolean   NOT NULL DEFAULT false,
"userId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text   NOT NULL ,
"password" text   NOT NULL ,
"name" text   ,
"gitHubName" text   ,
"solutionRepo" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Question" (
"id" SERIAL,
"title" text   NOT NULL ,
"userId" integer   ,
"url" text   ,
"algorithm" "Algorithm"[]  ,
"dataStructure" "DataStructureType"[]  ,
"solved" boolean   NOT NULL DEFAULT false,
"difficulty" "Difficulty"  ,
"userDifficulty" "Difficulty"  ,
"notes" text   ,
"userSolution" text   ,
"solution" text   ,
"timeSpent" integer   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

ALTER TABLE "public"."Post" ADD FOREIGN KEY("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Question" ADD FOREIGN KEY("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201101223844-update-schema-to-use-enums-for-certain-fields
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,83 @@
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Post {
+  id        Int     @id @default(autoincrement())
+  title     String
+  content   String?
+  published Boolean @default(false)
+  author    User?   @relation(fields: [userId], references: [id])
+  userId    Int?
+}
+
+model User {
+  id           Int        @id @default(autoincrement())
+  email        String     @unique
+  password     String
+  name         String?
+  questions    Question[]
+  Post         Post[]
+  gitHubName   String?
+  solutionRepo String?
+  createdAt    DateTime   @default(now())
+  updatedAt    DateTime   @default(now())
+}
+
+model Question {
+  id             Int                 @id @default(autoincrement())
+  title          String
+  user           User?               @relation(fields: [userId], references: [id])
+  userId         Int?
+  url            String?
+  algorithm      Algorithm[]
+  dataStructure  DataStructureType[]
+  solved         Boolean             @default(false)
+  difficulty     Difficulty?
+  userDifficulty Difficulty?
+  notes          String?
+  userSolution   String?
+  solution       String?
+  timeSpent      Int?
+  createdAt      DateTime            @default(now())
+  updatedAt      DateTime?           @default(now()) @updatedAt
+}
+
+enum DataStructureType {
+  LINKED_LIST
+  STACK
+  QUEUE
+  HASH_TABLE
+  ARRAY
+  STRING
+  GRAPH
+  TREE
+  BINARY_TREE
+  BINARY_SEARCH_TREE
+  HEAP
+  TRIE
+}
+
+enum Difficulty {
+  VERY_EASY
+  EASY
+  MEDIUM
+  HARD
+  VERY_HARD
+  EXTREMELY_HARD
+}
+
+enum Algorithm {
+  DYNAMIC_PROGRAMMING
+  POINTERS
+  RECURSION
+  PATH_FINDING
+  GRAPH_TRAVERSAL
+  SORTING
+  SEARCHING
+}
```


