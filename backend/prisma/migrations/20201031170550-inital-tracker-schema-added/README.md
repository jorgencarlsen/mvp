# Migration `20201031170550-inital-tracker-schema-added`

This migration has been generated by Jorgen Carlsen at 10/31/2020, 10:05:50 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Post" (
"id" SERIAL,
"title" text   NOT NULL ,
"content" text   ,
"published" boolean   NOT NULL DEFAULT false,
"userId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text   NOT NULL ,
"password" text   NOT NULL ,
"name" text   ,
"gitHubName" text   ,
"solutionRepo" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Question" (
"id" SERIAL,
"title" text   NOT NULL ,
"userId" integer   ,
"url" text   ,
"solved" boolean   NOT NULL DEFAULT false,
"userDifficulty" integer   ,
"userSolution" text   ,
"solution" text   ,
"timeSpent" integer   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,
"styleId" integer   ,
"difficultyLevelId" integer   ,
"dataStructureId" integer   ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."DataStructure" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."DifficultyLevel" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Style" (
"id" SERIAL,
"name" text   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

CREATE UNIQUE INDEX "DataStructure.name_unique" ON "public"."DataStructure"("name")

CREATE UNIQUE INDEX "DifficultyLevel.name_unique" ON "public"."DifficultyLevel"("name")

CREATE UNIQUE INDEX "Style.name_unique" ON "public"."Style"("name")

ALTER TABLE "public"."Post" ADD FOREIGN KEY("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Question" ADD FOREIGN KEY("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Question" ADD FOREIGN KEY("styleId")REFERENCES "public"."Style"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Question" ADD FOREIGN KEY("dataStructureId")REFERENCES "public"."DataStructure"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Question" ADD FOREIGN KEY("difficultyLevelId")REFERENCES "public"."DifficultyLevel"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201031170550-inital-tracker-schema-added
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,68 @@
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Post {
+  id        Int     @id @default(autoincrement())
+  title     String
+  content   String?
+  published Boolean @default(false)
+  author    User?   @relation(fields: [userId], references: [id])
+  userId    Int?
+}
+
+model User {
+  id           Int        @id @default(autoincrement())
+  email        String     @unique
+  password     String
+  name         String?
+  questions    Question[]
+  Post         Post[]
+  gitHubName   String?
+  solutionRepo String?
+  createdAt    DateTime   @default(now())
+}
+
+model Question {
+  id                Int              @id @default(autoincrement())
+  title             String
+  user              User?            @relation(fields: [userId], references: [id])
+  userId            Int?
+  url               String?
+  style             Style?           @relation(fields: [styleId], references: [id])
+  dataStructure     DataStructure?   @relation(fields: [dataStructureId], references: [id])
+  solved            Boolean          @default(false)
+  difficulty        DifficultyLevel? @relation(fields: [difficultyLevelId], references: [id])
+  userDifficulty    Int?
+  userSolution      String?
+  solution          String?
+  timeSpent         Int?
+  createdAt         DateTime         @default(now())
+  updatedAt         DateTime?        @default(now()) @updatedAt
+  styleId           Int?
+  difficultyLevelId Int?
+  dataStructureId   Int?
+}
+
+model DataStructure {
+  id        Int        @id @default(autoincrement())
+  name      String     @unique
+  questions Question[]
+}
+
+model DifficultyLevel {
+  id        Int        @id @default(autoincrement())
+  name      String     @unique
+  questions Question[]
+}
+
+model Style {
+  id        Int        @id @default(autoincrement())
+  name      String     @unique
+  questions Question[]
+}
```


